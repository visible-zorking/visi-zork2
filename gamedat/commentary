# Game commentary source.

# Formatting:
# [*LINK]: Jump to a new note; also display source if possible. (Default behavior.)
# [~LINK]: Display source for LINK, but keep this note open.
# [text|*LINK], [text|~LINK]: Specify link text.
# [text|https://...] External link.

ABOUT: Welcome to the commentary track!

const:ZORK-NUMBER: The number of the Zorks shall be two.
	(“Three, sir!”)
	Yes, but *this* one is Zork 2.

rtn:V-VERSION: Print the title, release, and serial number.
	This function is shared between all three Zorks, which is why it has code to print all three titles. The passages meant for Zork 1 and 3 were ignored when compiling Zork 2. (Skipped code is shown in grey.)

src:GVERBS-89: The TRS-80 interpreter set a special bit which told the game to change certain behavior for no-doubt-contractual reasons. For Zork 2, it adds the line “Licensed to Tandy Corporation”.
	For a complete list of “Tandy bit” behavior changes in Infocom games, [see this page|https://ifarchive.org/if-archive/infocom/info/tandy_bits.html].

objtree-legend: In this list, `Rooms` are rooms and `Items` are regular items. (Sometimes portable, sometimes not.)
	`Scen` indicates scenery objects. These exist in multiple places; for example, the [~obj:MOSS] is visible from many locations near the entrance.
	`Glob` indicates a global object, which is *always* visible, or at least mentionable. For example, [~obj:GRUE] is global – not because grues are always present, but so you can always ask `WHAT IS A GRUE`.

obj:LOCAL-GLOBALS: This is a container for scenery objects like [~obj:MOSS], which are visible from many locations in the game.

src:GGLOBALS-26: This refers to the word `ZZMGCK` in [~obj:LOCAL-GLOBALS], above.
	Why is this synonym necessary? Does it need to be alphabetically last? Not clear! Most Infocom games have it (or a variation), but some say “No, this synonym doesn’t need to exist” instead.
	If you type `EXAMINE ZZMGCK`, the parser finds [~obj:local-globals]. But that object is nameless, so you get a garbage reply. Go on, try it.

obj:ADVENTURER: Yes, the player’s printed name is “cretin”, although the game rarely says so. (The death message for `ATTACK HEADS` mentions it.) This sort of sarcastic insult hasn’t aged too well, but MIT culture had a lot of it. Compare [*glob:WINNER], and also the old MIT [Jargon File|https://jargon-file.org/archive/jargon-1.0.0.33.dos.txt].
	Note that if you refer to `ME` (or `CRETIN`), you get the [*obj:ME] global object, not the `ADVENTURER`.

obj:ME: A global object which is always in scope. Commands referring to `ME` hit this, rather than [*obj:ADVENTURER], which is a stub that moves around the map.
	Because of this, parser messages mostly refer to you as “you”, even though the [*obj:ADVENTURER]’s printed name is “cretin”.

glob:PLAYER: `PLAYER` is always the [~obj:ADVENTURER]. Compare [*glob:WINNER].

glob:WINNER: `WINNER` is the actor in the current command. (Compare [*glob:PLAYER].) 
	`WINNER` is usually [~obj:ADVENTURER], but for a command like `ROBOT, GO EAST` it shifts to the named NPC.
	“Winner” is just as sarcastic as “[cretin|*obj:ADVENTURER]”, but from the other side.

glob:HERE: The location of the [*glob:WINNER].

glob:LIT: Whether the current location has light. Set by calling the [rtn:LIT?] routine.

glob:ALWAYS-LIT: Whether the player is inherently emitting light. The wizard might cast `FLUORESCE` on you if he finds you in the dark.

rtn:LIT?: Determine whether a given location has light. This is true if the room or anything in it has [attr:ONBIT]. It’s also true if the player is [glob:ALWAYS-LIT].
	This routine is used to set the [glob:LIT] variable. It’s also used to determine visibility in some other situations. For example, if you peer out from inside a sphere, or look through the keyhole, the game checks whether you can see only darkness.

glob:LOW-DIRECTION: Properties with this value and up are directions.

attr:ONBIT: Set for glowing objects and naturally-illuminated rooms.
	This is different from [attr:LIGHTBIT], which indicates objects that the player can `TURN ON`. See also [attr:FLAMEBIT], objects which are on fire.

attr:FLAMEBIT: Set for objects which are on fire. Such objects normally also have [attr:ONBIT].
	This is different from [attr:BURNBIT], which indicates objects that the player can `BURN`.

attr:LIGHTBIT: Set for objects which the player can sensibly `TURN ON/OFF` (e.g. the [~obj:lamp]). Objects which have been `FLUORESCE`d also have this, although only to tell you “You can’t turn that off.”
	This is different from [attr:ONBIT], which indicates objects that are currently lit up. See also [attr:BURNBIT], objects which the player can `BURN`.

attr:BURNBIT: Set for objects which the player can `BURN`. (It might be a bad idea, but you can do it.)
	This is different from [attr:FLAMEBIT], which indicates objects that are currently on fire. See also [attr:LIGHTBIT], objects which the player can `TURN ON`.

attr:RLANDBIT: Set for rooms which are solid ground. (Most of them.) The alternative is [attr:NONLANDBIT], but several rooms have both.

attr:NONLANDBIT:Set for “rooms” in which you float in the air – or might float, at least. If the room has any walkable floor, it will also have [attr:RLANDBIT].
	This flag is also set for objects which are (temporarily) much larger than you. This happens to anything you’re not holding when you shrink yourself in the Tea Room.

attr:NWALLBIT: Set for “rooms” which are in the open air. The game does not use this flag for anything, however.

attr:SACREDBIT: Not used in Zork 2.

glob:SPRAYED?: Whether you’ve been sprayed with grue repellant.

glob:FANTASIES: A table of hallucinations which can result from the `FANTASIZE` spell. Unfortunately, the code that displays `FANTASIES` has been lost, so the spell has no effect! See the [PRINT-CONT|~src:GVERBS-1712] routine.

src:GVERBS-1712: In earlier versions of Zork 2, there was code here to display [~glob:FANTASIES] if you were under the `FANTASIZE` spell. Unfortunately, when renovating the Zorks in 1984, this code was somehow lost. The `FANTASIZE` spell is now broken.

glob:DUMMY: `DUMMY` gives random responses for silly commands, like `CLOSE DOOR` when the door isn’t open.
	This table is defined in two places in the source, with different contents. See [GVERBS|~src:GVERBS-2133]. The compiler apparently didn’t report this as an error, and the developers didn’t notice.

src:GVERBS-2133: The [~glob:DUMMY] table is defined elsewhere, so this declaration has no effect.
	I’ve colored it grey, as if it were not compiled, but that’s not strictly correct. This version of the table can be found in memory (address 10795); but nothing refers to it, so its contents are never printed.

src:GVERBS-912: This is clearly intended to be the response to `ODYSSEUS`, but it is never printed. In fact the compiler has discarded the string entirely. The `CYCLOPS` code above, which is only compiled in Zork 1, seems to have confused the rest of the function.
	(Interesting, the carriage return `CR` *is* printed. So the compiler didn’t skip the entire line. See [rtn:BLAST] for a similar incident.)

rtn:BLAST: This provides a custom response in the Dusty Room. Sadly, the `BLAST` routine is never called, so the effort is wasted. (The command `BLAST` is handled by [~rtn:V-BLAST].)
	The compiler has discarded the string but not the routine, which is an interesting optimization choice.

### snapshots of ascii art

